(function(e){function t(t){for(var i,s,u=t[0],c=t[1],o=t[2],l=0,d=[];l<u.length;l++)s=u[l],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);h&&h(t);while(d.length)d.shift()();return r.push.apply(r,o||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,u=1;u<n.length;u++){var c=n[u];0!==a[c]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},a={app:0},r=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var o=0;o<u.length;o++)t(u[o]);var h=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},1843:function(e,t,n){"use strict";n("d666")},1914:function(e,t,n){e.exports=n.p+"img/xing-tian.d73f4806.png"},"1b41":function(e,t,n){"use strict";n("60a0")},"24dd":function(e,t,n){e.exports=n.p+"img/hou.83adadc2.png"},"40c9":function(e,t,n){e.exports=n.p+"img/gyarados.e3ea375f.png"},"5fc1":function(e,t,n){e.exports=n.p+"media/bgm.1afd5b1f.mp3"},"60a0":function(e,t,n){},"701e":function(e,t,n){"use strict";n("72b9")},"71cb":function(e,t,n){e.exports=n.p+"img/qiong-qi.c80cd027.png"},"72b9":function(e,t,n){},"861e":function(e,t,n){e.exports=n.p+"img/whale.855b540a.png"},"930e":function(e,t,n){e.exports=n.p+"img/gu-diao.2b76e122.png"},be35:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("7a23"),a=n("5fc1"),r=n.n(a),s=Object(i["o"])("data-v-9a5a9848");Object(i["i"])("data-v-9a5a9848");var u={class:"container"},c={ref:"pixiContainer",id:"pixi"},o={class:"top-right-box"},h={class:"game-status"},l={class:"game-time"},d={class:"game-value"},v={ref:"bgm"},f=Object(i["e"])("source",{src:r.a,type:"audio/mpeg",loop:"",autoplay:""},null,-1),p=Object(i["e"])("i",{class:"iconfont icon-a-shezhi"},null,-1),g={key:0,class:"center-box"},m={key:0,class:"end-text"};Object(i["h"])();var b=s((function(e,t,n,a,r,s){var b=Object(i["l"])("DiaLogue");return Object(i["g"])(),Object(i["c"])("div",u,[Object(i["e"])("div",c,null,512),Object(i["e"])("div",o,[Object(i["e"])("div",h,[Object(i["e"])("div",l,Object(i["m"])(a.gameTime),1),Object(i["e"])("div",d,"积分："+Object(i["m"])(a.gameValue),1)]),Object(i["e"])("audio",v,[f],512),a.isPlay?(Object(i["g"])(),Object(i["c"])("i",{key:0,onClick:t[1]||(t[1]=function(){return a.bmgPause&&a.bmgPause.apply(a,arguments)}),class:"iconfont icon-bofangyinle"})):(Object(i["g"])(),Object(i["c"])("i",{key:1,onClick:t[2]||(t[2]=function(){return a.bmgPlay&&a.bmgPlay.apply(a,arguments)}),class:"iconfont icon-guanbiyinle"})),p]),a.isIdle||a.isPause?(Object(i["g"])(),Object(i["c"])("div",g,[a.isPlayed?(Object(i["g"])(),Object(i["c"])("p",m,Object(i["m"])(a.endText),1)):Object(i["d"])("",!0),a.isIdle?(Object(i["g"])(),Object(i["c"])("div",{key:1,onClick:t[3]||(t[3]=function(){return a.handleStart&&a.handleStart.apply(a,arguments)}),class:"start-btn"},"山海经")):a.isPause?(Object(i["g"])(),Object(i["c"])("div",{key:2,onClick:t[4]||(t[4]=function(){return a.handleContinue&&a.handleContinue.apply(a,arguments)}),class:"start-btn"}," 继续 ")):Object(i["d"])("",!0)])):Object(i["d"])("",!0),a.messageObject.text?(Object(i["g"])(),Object(i["c"])(b,{key:1,text:a.messageObject.text,leftImg:a.messageObject.leftImg,rightImg:a.messageObject.rightImg,onClick:a.handleNext},null,8,["text","leftImg","rightImg","onClick"])):Object(i["d"])("",!0)])})),y=n("1da1"),k=(n("96cf"),Object(i["o"])("data-v-239a98d5"));Object(i["i"])("data-v-239a98d5");var j={class:"diaLogue-box"},O={class:"content"};Object(i["h"])();var w=k((function(e,t,n,a,r,s){return Object(i["g"])(),Object(i["c"])("div",{class:"diaLogue",onClick:t[1]||(t[1]=function(){return a.handleClick&&a.handleClick.apply(a,arguments)})},[Object(i["e"])("div",j,[Object(i["e"])("div",O,[Object(i["e"])("p",null,Object(i["m"])(n.text),1)]),n.leftImg?(Object(i["g"])(),Object(i["c"])("img",{key:0,class:"left-img",src:n.leftImg,alt:"你"},null,8,["src"])):Object(i["d"])("",!0),n.rightImg?(Object(i["g"])(),Object(i["c"])("img",{key:1,class:"right-img",src:n.rightImg,alt:"他"},null,8,["src"])):Object(i["d"])("",!0)])])})),x={name:"DiaLogue",props:{leftImg:String,rightImg:String,text:String},setup:function(e,t){var n=t.emit;function i(){n("click")}return{handleClick:i}}};n("701e");x.render=w,x.__scopeId="data-v-239a98d5";var L=x,P=n("2909"),T=n("d4ec"),_=n("bee2"),E=(n("d81d"),n("a434"),n("7aaa")),C=(n("d3b7"),function(){return document.documentElement.clientHeight}),M=function(){return document.documentElement.clientWidth};function S(e,t){var n,i=E["b"].shared.resources;return null!==(n=i[e])&&void 0!==n&&n.texture?i[e].texture:new Promise((function(n){E["b"].shared.add(e,t).load(n)}))}function I(e,t){var n={centerX:0,centerY:0,halfWidth:0,halfHeight:0},i={centerX:0,centerY:0,halfWidth:0,halfHeight:0};n.centerX=e.x+e.width/2,n.centerY=e.y+e.height/2,i.centerX=t.x+t.width/2,i.centerY=t.y+t.height/2,n.halfWidth=e.width/2,n.halfHeight=e.height/2,i.halfWidth=t.width/2,i.halfHeight=t.height/2;var a=n.centerX-i.centerX,r=n.centerY-i.centerY,s=n.halfWidth+i.halfWidth,u=n.halfHeight+i.halfHeight;return Math.abs(a)<s&&Math.abs(r)<u}var W,N=n("262e"),V=n("2caf"),z=30,A=1500,H=25,R=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:z,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(T["a"])(this,e),this._healthValue=0,this.app=t,this.sprite=n,this.size={width:n.width,height:n.height},this.healthValue=i,this.delicious=a}return Object(_["a"])(e,[{key:"healthValue",get:function(){return this._healthValue},set:function(e){this._healthValue=e,this.sprite.width=e,this.sprite.height=this.size.height*this.healthValue/this.size.width}},{key:"getSprite",value:function(){return this.sprite}},{key:"collision",value:function(e){return this.healthValue>e.healthValue}},{key:"eat",value:function(e){return this.healthValue+=e,this}},{key:"start",value:function(){return this}},{key:"pause",value:function(){return this}},{key:"destruction",value:function(){return this}}]),e}(),D=(n("159b"),n("b64b"),n("5530")),K=Object(i["k"])(!0),q=Object(i["k"])(!0),X=Object(i["k"])(!1),Y=Object(i["k"])(!1),F=Object(i["a"])((function(){return!q.value&&K.value})),J=Object(i["k"])(0);function U(){B(),W=setTimeout((function(){J.value+=1,U()}),1e3)}function B(){clearTimeout(W)}var G=Object(i["k"])(0),Q=Object(i["k"])(1),Z=(Object(i["k"])(!1),{text:"",leftImg:"",rightImg:""}),$={state:Object(i["j"])({messageObject:Z,signShow:!1,signValue:""}),setMessageObject:function(e){this.state.messageObject=Object(D["a"])(Object(D["a"])({},Z),e)},setSignShow:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state.signShow=e},setSignValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.state.signValue=e}},ee=function(){function e(t,n,i,a){var r=this;Object(T["a"])(this,e),this.v=0,this.direction="",this._direction="",this.timeNow=0,this.keyboardMoveCombination=[],this.app=t,this.sprite=n,this.v0=i,this.v1=a,this._recovery=function(){r.keyboardMoveCombination.forEach((function(e){return e.cease()})),r.recovery()},this.recovery()}return Object(_["a"])(e,[{key:"bind",value:function(e){var t=this;this.keyboardMoveCombination=Object.keys(e).map((function(n){return new te(n,(function(){Y.value||(t.direction=n,t.quicken(),e[n].down(t.v))}),(function(){var i,a;t.recovery(),null===(i=e[n])||void 0===i||null===(a=i.up)||void 0===a||a.call(i)}))})),window.addEventListener("blur",this._recovery)}},{key:"quicken",value:function(){this.direction!==this._direction&&(this.timeNow=Date.now()+250,this._direction=this.direction),this.timeNow&&Date.now()>=this.timeNow&&(this.v=Math.min(this.v+1,this.v1),this.timeNow=Date.now()+250)}},{key:"recovery",value:function(){this.timeNow=0,this.v=this.v0,this.direction="",this._direction=""}},{key:"removeEvent",value:function(){window.removeEventListener("blur",this._recovery),this.keyboardMoveCombination.forEach((function(e){return e.removeEvent()}))}}]),e}(),te=function(){function e(t,n,i){var a=this;Object(T["a"])(this,e),this.time=0,this.keydown=n,this.keyup=i,this.time,this.handleKeydown=function(e){a.time||e.key!==t||a.step()},this.handleKeyup=function(e){var n;e.key===t&&(null===(n=a.keyup)||void 0===n||n.call(a,e),a.cease())},this.addEvent()}return Object(_["a"])(e,[{key:"step",value:function(){var e=this;this.time=requestAnimationFrame((function(){e.keydown(),e.step()}))}},{key:"cease",value:function(){cancelAnimationFrame(this.time),this.time=0}},{key:"addEvent",value:function(){this.handleKeydown&&window.addEventListener("keydown",this.handleKeydown,!1),this.handleKeyup&&window.addEventListener("keyup",this.handleKeyup,!1)}},{key:"removeEvent",value:function(){this.handleKeydown&&window.removeEventListener("keydown",this.handleKeydown),this.handleKeyup&&window.removeEventListener("keyup",this.handleKeyup)}}]),e}(),ne=function(e){Object(N["a"])(n,e);var t=Object(V["a"])(n);function n(e,i){var a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,u=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0;return Object(T["a"])(this,n),a=t.call(this,e,i,u,c),a.keyboardMove=new ee(a.app,a.sprite,r,s),a}return Object(_["a"])(n,[{key:"bind",value:function(e){return this.keyboardMove.bind(e),this}}]),n}(R);function ie(e){e.healthValue=z}function ae(e,t){var n=new E["c"](E["b"].shared.resources.whale.texture),i=new ne(e,n,3,4);return"function"===typeof t&&i.bind(t(e,n)),i}var re=function(e,t){return{ArrowUp:{down:function(e){t.y>0?t.y-=e:t.y=0}},ArrowRight:{down:function(n){var i=e.renderer.width-t.width;i>t.x?t.x+=n:t.x=i}},ArrowDown:{down:function(n){var i=e.renderer.height-t.height;i>t.y?t.y+=n:t.y=i}},ArrowLeft:{down:function(e){t.x>0?t.x-=e:t.x-=0}}}},se=function(e,t){return{w:{down:function(e){t.y>0?t.y-=e:t.y=0}},d:{down:function(n){var i=e.renderer.width-t.width;i>t.x?t.x+=n:t.x=i}},s:{down:function(n){var i=e.renderer.height-t.height;i>t.y?t.y+=n:t.y=i}},a:{down:function(e){t.x>0?t.x-=e:t.x-=0}}}},ue=(n("c740"),n("fb6a"),function(){function e(t){var n=this;Object(T["a"])(this,e),this.game=t,this.materialList=[],this.pcList=[],this.handleTick=function(){n.forTesting()}}return Object(_["a"])(e,[{key:"app",get:function(){return this.game.app}},{key:"width",get:function(){return this.app.renderer.width}},{key:"height",get:function(){return this.app.renderer.height}},{key:"Number",get:function(){return this.materialList.length+this.pcList.length}},{key:"isFull",get:function(){return e.npcMax<=this.Number}},{key:"addPC",value:function(){for(var e,t=this,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=this.pcList).push.apply(e,i),i.forEach((function(e){return t.add(e)})),this}},{key:"removePC",value:function(e){var t=this.pcList.findIndex((function(t){return e===t}));return-1!==t&&(this.pcList.splice(t,1),this.remove(e)),this}},{key:"addMaterial",value:function(){var t,n=this;if(this.isFull)return this;for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];var s=a.slice(0,e.npcMax-this.Number);return(t=this.materialList).push.apply(t,Object(P["a"])(s)),s.forEach((function(e){return n.add(e)})),this}},{key:"removeMaterial",value:function(e){var t=this.materialList.findIndex((function(t){return e===t}));return-1!==t&&(this.materialList.splice(t,1),this.remove(e)),this}},{key:"add",value:function(e){return this.app.stage.addChild(e.getSprite()),this}},{key:"remove",value:function(e){return this.app.stage.removeChild(e.getSprite()),e.destruction(),this}},{key:"empty",value:function(){var e=this;return this.materialList.forEach((function(t){return e.remove(t)})),this.materialList.length=0,this.pcList.forEach((function(t){return e.remove(t)})),this.pcList.length=0,this}},{key:"openTickHitTestRectangle",value:function(){return this.app.ticker.add(this.handleTick),this}},{key:"closeTickHitTestRectangle",value:function(){return this.app.ticker.remove(this.handleTick),this}},{key:"forTesting",value:function(){for(var e,t,n=0;n<this.pcList.length;n++){t=this.pcList[n];for(var i=0;i<this.materialList.length;i++){if(e=this.materialList[i],this.hit(e,t))return;this.out(e)}}}},{key:"hit",value:function(e,t){return!!I(t.getSprite(),e.getSprite())&&(e.collision(t)?(e.eat(t.delicious),this.removePC(t),this.gameOver(),!0):(t.eat(e.delicious),this.removeMaterial(e),G.value+=e.delicious,!1))}},{key:"out",value:function(e){return("l"===e.direction&&e.getSprite().x>this.width+e.getSprite().width||"r"===e.direction&&e.getSprite().x<-e.getSprite().width)&&this.removeMaterial(e),this}},{key:"pause",value:function(){return this.materialList.forEach((function(e){return e.pause()})),this}},{key:"start",value:function(){return this.materialList.forEach((function(e){return e.start()})),this}},{key:"gameOver",value:function(){return this.pcList.length||this.game.gameCycle.reject(),this}}]),e}());ue.npcMax=20;var ce,oe=n("861e"),he=n.n(oe);n("a9e3"),n("b680");(function(e){e["l"]="l",e["r"]="r"})(ce||(ce={}));var le=function(e){Object(N["a"])(n,e);var t=Object(V["a"])(n);function n(e,i,a){var r,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ce.l,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return Object(T["a"])(this,n),r=t.call(this,e,i,a,u),r.speed=c,r.direction=s,r.move=function(){var e=r.speed;r.sprite.x+="l"===r.direction?e:-e},r}return Object(_["a"])(n,[{key:"positionOut",value:function(){return this.sprite.x="l"===this.direction?-this.sprite.width:this.app.renderer.width,this.sprite.y=Math.min(this.app.renderer.height-this.sprite.height,Math.random()*this.app.renderer.height),this}},{key:"start",value:function(){return this.app.ticker.add(this.move),this}},{key:"pause",value:function(){return this.app.ticker.remove(this.move),this}},{key:"destruction",value:function(){return this.pause(),this}}]),n}(R),de=[{name:"冉遗鱼",introduce:"冉遗鱼是古代中国神话中的怪鱼。英鞮山，涴水从这座山发源，然后向北流入陵羊泽。水里有很多冉遗鱼，这种鱼长着鱼身、蛇头，还有六只脚，他的眼睛形状如同马的耳朵，吃了这种鱼可以使人不患梦魇症，还可以防御凶灾。出自《山海经》",textureName:"ran-yi-yu",img:n("cdb7")},{name:"蛊雕",introduce:"蛊雕又称纂雕，是一种似鸟非鸟的食人怪兽，样子像雕，头上长角，叫声像婴儿的哭啼声，是古代中国神话传说中的一种怪兽",textureName:"gu-diao",img:n("930e")},{name:"暴鲤龙",introduce:"体型拥有超过六公尺的巨大身体，性情极为暴躁，抚摸它头上的角可以让它变得温和。可一旦暴动，不烧烬一切凶暴血液就绝不会平静。留有曾经连续一个月暴走的记录，非常凶暴的宝可梦。",textureName:"gyarados",img:n("40c9")},{name:"穷奇",introduce:"据说穷奇经常飞到打斗的现场，将有理的一方吃掉，将忠诚的人鼻子咬掉；如果有人犯下恶行，穷奇会捕捉野兽送给他，并且鼓励他多做坏事。古人也把那种不重心意、远君子近小人的人称为穷奇。",textureName:"qiong-qi",img:n("71cb")},{name:"刑天",introduce:"刑天，是中国远古神话传说人物，手使一柄巨斧和盾牌，身强力壮，体型巨大的上古巨人，炎帝手下大将，和黄帝争位，被斩去头颅，失了首级后，以双乳为眼，肚脐为口，再战黄帝。",textureName:"xing-tian",img:n("1914")}],ve=de.map((function(e,t){return Object(D["a"])(Object(D["a"])({},e),{},{healthValue:.6*t*z+z,delicious:.1*t+.5})})),fe=ve,pe={name:"犼",introduce:"体型拥有超过六公尺的巨大身体，性情极为暴躁，抚摸它头上的角可以让它变得温和。可一旦暴动，不烧烬一切凶暴血液就绝不会平静。留有曾经连续一个月暴走的记录，非常凶暴的宝可梦。",textureName:"hou",img:n("24dd"),healthValue:de.length*z,delicious:de.length};function ge(e){if(e>=fe.length)return!1;var t=fe[e];return Object(D["a"])(Object(D["a"])({},t),{},{texture:E["b"].shared.resources[t.textureName].texture})}function me(e,t,n){var i=ge(be());if(!i)return n(),!1;var a=i.texture,r=i.healthValue,s=new E["c"](a),u=new le(e,s,r,Math.random()>.5?ce.r:ce.l);return u.positionOut(),t.addMaterial(u),u.start(),!0}function be(){return Math.floor(J.value/H)}var ye=function e(){Object(T["a"])(this,e),this._resolve=function(){},this._reject=function(){}},ke=function(e){Object(N["a"])(n,e);var t=Object(V["a"])(n);function n(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;return Object(T["a"])(this,n),i=t.call(this),i.waitTime=0,i.ing=!1,i.app=e,i.time=a,i._time=a,i.move=function(){i.waitTime<=Date.now()&&(i.resolve(),i._time=i.time)},i}return Object(_["a"])(n,[{key:"createTaskPromise",value:function(){var e=this;return new Promise((function(t,n){e._resolve=t,e._reject=n,e.ing=!0}))}},{key:"start",value:function(){return this.app.ticker.add(this.move),this.ing&&(this.waitTime=Date.now()+this._time),this}},{key:"pause",value:function(){return this.app.ticker.remove(this.move),this.ing&&(this._time=this.waitTime-Date.now()),this}},{key:"resolve",value:function(){this._resolve(!0),this.ing=!1}},{key:"reject",value:function(){this._reject(),this.ing=!1}},{key:"finally",value:function(){}},{key:"next",value:function(){return this}}]),n}(ye),je=function(e){Object(N["a"])(n,e);var t=Object(V["a"])(n);function n(e,i){var a;return Object(T["a"])(this,n),a=t.call(this),a.app=e,a.organization=i,a.wait=new ke(e,a.getMillisecond()),a}return Object(_["a"])(n,[{key:"getMillisecond",value:function(){return Number((Math.random()*A).toFixed())/Q.value}},{key:"createTaskPromise",value:function(){var e=this;return new Promise((function(t,n){return e._resolve=t,e._reject=n,e.nextThen()}))}},{key:"nextThen",value:function(){var e=this;return this.wait.createTaskPromise().then((function(){var t=me(e.app,e.organization,e.resolve.bind(e));if(t){var n=e.nextThen();return e.wait.time=e.getMillisecond(),e.wait.start(),n}return Promise.resolve()}))}},{key:"start",value:function(){return this.organization.start(),this.wait.start(),this}},{key:"pause",value:function(){return this.organization.pause(),this.wait.pause(),this}},{key:"resolve",value:function(){this.pause(),this._resolve(!0)}},{key:"reject",value:function(){this._reject()}},{key:"next",value:function(){return this}}]),n}(ye),Oe=function(e){Object(N["a"])(n,e);var t=Object(V["a"])(n);function n(e){var i;return Object(T["a"])(this,n),i=t.call(this),i.index=0,i.taskList=[],i.tasks=e,i}return Object(_["a"])(n,[{key:"currentTask",get:function(){return this.tasks[this.index]}},{key:"createTaskList",value:function(){var e=this;return this.taskList=this.tasks.map((function(t){return e.taskPackage(t)})),this}},{key:"taskPackage",value:function(e){var t=this,n=e.resolve.bind(e);return e.resolve=function(){t.index++,n()},e.createTaskPromise()}},{key:"createTaskPromise",value:function(){var e=this;return new Promise((function(t,n){return e._resolve=t,e._reject=n,e.nextThen().then(e.resolve.bind(e)).catch(e.reject.bind(e)).finally(e.finally.bind(e))}))}},{key:"nextThen",value:function(){return this.taskList.length>this.index?this.taskList[this.index].then(this.nextThen.bind(this)):Promise.resolve()}},{key:"start",value:function(){return this.currentTask&&this.currentTask.start(),this}},{key:"pause",value:function(){return this.currentTask&&this.currentTask.pause(),this}},{key:"resolve",value:function(){this._resolve(!0)}},{key:"reject",value:function(){this.pause(),this._reject()}},{key:"finally",value:function(){}},{key:"next",value:function(){return this.currentTask&&this.currentTask.next(),this}}]),n}(ye);function we(e,t){return new Oe([new je(e,t)])}var xe,Le=function(){function e(t){Object(T["a"])(this,e),this.game=t,this.taskList=we(this.game.app,this.game.organization)}return Object(_["a"])(e,[{key:"start",value:function(){q.value||this.clean(),this.taskList=we(this.game.app,this.game.organization),this.taskList.createTaskList().createTaskPromise().then((function(){return X.value=!0})).catch((function(){return X.value=!1})).finally((function(){return K.value=!0})),this.regression(),this.handleIng()}},{key:"pause",value:function(){this.handlePause()}},{key:"continue",value:function(){this.handleIng()}},{key:"end",value:function(){this.handlePause()}},{key:"handlePause",value:function(){this.game.organization.closeTickHitTestRectangle(),this.taskList.pause(),B()}},{key:"handleIng",value:function(){this.game.organization.openTickHitTestRectangle(),this.taskList.start(),U()}},{key:"regression",value:function(){J.value=0,G.value=0}},{key:"clean",value:function(){var e;this.game.organization.empty(),this.game.whales.forEach((function(e){ie(e)})),(e=this.game.organization).addPC.apply(e,Object(P["a"])(this.game.whales))}},{key:"reject",value:function(){this.taskList.reject()}},{key:"next",value:function(){return this.taskList.next(),this}}]),e}(),Pe=function(){function e(){Object(T["a"])(this,e),this.whales=[],this.idleWatch=function(){},this.pauseWatch=function(){},this.app=new E["a"]({height:C(),width:M()}),this.organization=new ue(this),this.gameCycle=new Le(this),this.startAntPause=function(e){"Space"===e.code&&(K.value?(K.value=!1,q.value=!1):Y.value=!Y.value)}}return Object(_["a"])(e,[{key:"init",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.createWhales();case 2:(t=this.organization).addPC.apply(t,Object(P["a"])(this.whales));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"createWhales",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,S("whale",he.a);case 2:t=[re,se],this.whales=t.splice(0,Q.value).map((function(e){return ae(n.app,e)}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"bindWatchEvent",value:function(){var e=this;this.removeWatchEvent(),this.idleWatch=Object(i["n"])(K,(function(t){t?e.gameCycle.end():e.gameCycle.start()})),this.pauseWatch=Object(i["n"])(Y,(function(t){t?e.gameCycle.pause():e.gameCycle.continue()}))}},{key:"removeWatchEvent",value:function(){"function"===typeof this.pauseWatch&&this.pauseWatch()}},{key:"bindWindowEvent",value:function(){this.removeWindowEvent(),window.addEventListener("keyup",this.startAntPause)}},{key:"removeWindowEvent",value:function(){window.removeEventListener("keyup",this.startAntPause)}},{key:"next",value:function(){return this.gameCycle.next(),this}}]),e}();function Te(){return xe||(xe=new Pe,xe.bindWindowEvent(),xe.bindWatchEvent()),xe}function _e(){var e=fe.map((function(e){return{name:e.textureName,url:e.img}}));return e.push({name:pe.textureName,url:pe.img}),new Promise((function(t){E["b"].shared.add(e).load(t)}))}var Ee={components:{DiaLogue:L},setup:function(){var e;function t(){e.next()}var n=Object(i["k"])(document.documentElement),a=Object(i["k"])(document.documentElement),r=Object(i["k"])(!1);function s(){K.value=!1,q.value=!1}function u(){Y.value=!1}var c=Object(i["a"])((function(){return X.value?"恭喜你！羽化成鲲！":"游戏结束，鲸落"}));function o(){n.value.play()}function h(){n.value.pause()}return Object(i["f"])(Object(y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n.value.addEventListener("play",(function(){r.value=!0})),n.value.addEventListener("pause",(function(){r.value=!1})),t.next=4,_e();case 4:return e=Te(),t.next=7,e.init();case 7:a.value.appendChild(e.app.view);case 8:case"end":return t.stop()}}),t)})))),{pixiContainer:a,handleStart:s,handleContinue:u,isIdle:K,isPause:Y,isSuccess:X,isPlayed:F,gameTime:J,gameValue:G,endText:c,isPlay:r,bgm:n,bmgPlay:o,bmgPause:h,messageObject:$.state.messageObject,handleNext:t}}};n("1843"),n("1b41");Ee.render=b,Ee.__scopeId="data-v-9a5a9848";var Ce=Ee;n("be35");Object(i["b"])(Ce).mount("#app")},cdb7:function(e,t,n){e.exports=n.p+"img/ran-yi-yu.651fd8a9.png"},d666:function(e,t,n){}});
//# sourceMappingURL=app.f00f6610.js.map